<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>

  <style>
    .yellow{background: yellow}
  </style>

  <h2>이벤트 메소드</h2>

  <h3>클릭해보세요1</h3>
  <h3>클릭해보세요2</h3>

  <script>
    /*
      * 이벤트 메소드
        1. jQuery용 객체에 이벤트 핸들러를 부여하는 메소드
        2. 주로 이벤트명이 곧 메소드 명으로 되어있음 
        3. 사용법
           이벤트대상.이벤트메소드(이벤트핸들러);

           1) 익명함수
              이벤트대상.click(function(evt) {
                실행내용;
              })

           2) 화살표함수
              이벤트대상.click(evt => {
                실행내용;
              })

    */
    $(document).ready(function(){

      // JavaScript 방식
      /*
      const h3List = document.getElementsByTagName('h3'); // [h3, h3]
      for(let h3El of h3List){
        h3El.onclick = function() {
          console.log('클릭됨');
        }
      }
      */

      // jQuery 방식
      $('h3').click(function(evt) {
        console.log(window.event.target);
        console.log(evt.target);
        console.log(this);
        console.log('-------------------')
      })

      $('h3').click((evt) => {
        console.log(window.event.target);
        console.log(evt.target);
        // console.log(this); 
        console.log('-------------------')
      })

      $('h3').dblclick(function(evt) {
        // 현재 이벤트가 발생된 해당 요소의
        // 문구 변경 및 스타일 변경
        $(evt.target).html('더블클릭됨');
        $(this).css('backgroundColor', 'red');
        // evt.target 또는 this 자바스크립트 방식의 객체
      })

      /*
      $('h3').mouseenter(function() {
        $(this).addClass('yellow');
      })
      $('h3').mouseout(function(){
        $(this).removeClass('yellow');
      })
      */

      // hover 이벤트메소드로 mouseenter + mouseout 같이 부여 가능
      $('h3').hover(function(){
        $(this).addClass('yellow');
      }, function(){
        $(this).removeClass('yellow');
      })  

    })
  </script>

  <h2>on 메소드</h2>

  <h4 id="test1">마우스 클릭 및 올려보세요</h4>

  <div id="wrap">
    <h5>정적요소 (페이지 로드시 존재하는 요소)</h5>
  </div>

  <script>
    /*
      * on 메소드
        1. 하나의 이벤트 타입에 여러개의 이벤트 핸들러 등록 가능 (표준 이벤트 모델의 특징)
        2. 사용법
           1) 정적요소 (페이지 로드시 존재하는 요소)
              이벤트대상.on('이벤트타입', function(evt) {
                실행내용;
              })
           2) 동적요소 (페이지 로드시에는 없다가 이벤트에 의해 동적으로 만들어지는 요소)
              이벤트대상의상위요소.on('이벤트타입', '이벤트대상', function(evt) {
                실행내용;
              })

      * off 메소드
        1. 등록된 이벤트를 제거하는 메소드
        2. 사용법
           이벤트대상.off('이벤트타입');
    */
    $(document).ready(function() {

      /*
      $('#test1').on('mouseenter', function() {
        $(this).css('backgroundColor', 'yellowgreen').text('마우스 올라감');
      })
      $('#test1').on('mouseout', function() {
        $(this).css('backgroundColor', 'yellow').text('마우스 빠져나감');
      })
      */

      // 객체로 전달 가능
      $('#test1').on({
        mouseenter: function() {
          $(this).css('backgroundColor', 'yellowgreen').text('마우스 올라감');
        },
        mouseout: function() {
          $(this).css('backgroundColor', 'yellow').text('마우스 빠져나감');
        }
      });

      $('#test1').on('click', function() {
        $(this).css('backgroundColor', 'red')
               .text('hover 기능 제거됨')
               .off('mouseenter')
               .off('mouseout');
        
        // 동적으로 <h5>요소 생성해서 #wrap 자손으로 추가
        $('#wrap').append($('<h5>동적요소 (페이지 로드시 없던 요소)</h5>'));

      })

      /*
      // 동적으로 만들어진 요소에는 반영 안됨
      $('#wrap h5').on('click', function() {
        alert('h5요소 클릭됨');
      })
      */

      // 동적으로 만들어진 요소에도 이벤트를 부여하고자 할 경우
      // 아래와 같은 방법으로 해야됨 *************************
      /*
      $('#wrap').on('click', 'h5', function() {
        alert('h5요소 클릭됨');
      })
      */
      $(document).on('click', '#wrap h5', function() {
        alert('h5요소 클릭됨');
      })
      // $(document) 로도 가능

    })
  </script>

  <hr>

  <h2>연습1</h2>

  <ul id='jjigae'>
    <li class="menu">김치찌개</li>
    <li class="menu">된장찌개</li>
    <li class="menu">순두부찌개</li>
  </ul>

  <script>
    $(document).ready(function(){
      /*
        문제1. 
        .menu 요소 클릭시 현재 클릭된 요소의 text값이 alert로 띄워지도록
      */
      $('#jjigae .menu').on('click', function() {
        alert($(this).text());
      })
    })
  </script>

  <h2>연습2</h2>

  <div id="hobby">
    <input type="checkbox" name="hobby" value="reading" id="reading">
    <label for="reading">독서</label>
    <input type="checkbox" name="hobby" value="sports" id="sports">
    <label for="sports">스포츠</label>
    <input type="checkbox" name="hobby" value="movie" id="movie">
    <label for="movie">영화</label>

    <button id="hobby-btn">클릭</button>
  </div>

  <script>
    $(document).ready(function(){
      /*
        문제1. 
        #hobby 내의 checkbox 요소 클릭시
        현재 클릭된 checkbox 요소가 
        checked 상태일 경우 가로,세로 길이를 30px로 변경, 그 뒤의 문구크기를 32px로 변경
        checked 상태가 아닐 경우 원상복구 시키기
      */
      $('#hobby :checkbox').on('click', function(){
        //if($(this).prop('checked'))
        if($(this).is(':checked')){ // check상태일 경우
          $(this).css({width: '30px', height: '30px'});
          $(this).next().css('fontSize', '32px');
        }else{ // check해제일 경우
          $(this).css({width: '', height: ''});
          $(this).next().css('fontSize', '');
        }
      })

      /*
        문제2.
        #hobby-btn 클릭시 현재 checked 상태의 checkbox 요소들의 value값을 alert로 출력하기
        만일 checked된 checkbox가 없을 경우 '선택된 취미가 없습니다.' 출력
      */
      $('#hobby-btn').on('click', function() {
        let result = '';

        //console.log($('#hobby :checkbox:checked'));
        let count = $('#hobby :checkbox:checked').length;

        if(count == 0){
          result = '선택된 취미가 없습니다.';
        }else{
          for(let i=0; i<count; i++){
            result += $('#hobby :checkbox:checked').eq(i).val() + ' ';
          }
        }

        alert(result);
      })

    })
  </script>

  <hr>

  <h2>one 메소드</h2>

  <button id="one-time">한번만 실행됨</button>

  <script>
    /*
      * one 메소드
        1. 한번만 동작하는 이벤트 작성가능
        2. 사용법
           이벤트대상.one('이벤트타입', function() {
              실행내용;
           })
    */

    $(document).ready(function() {
      $('#one-time').one('click', function(){
        alert('처음이자 마지막 이벤트 실행');
      })
    })
  </script>

  <hr>

  <h2>trigger 메소드</h2>
  <button id="trigger">#test1클릭</button>

  <script>
    /*
      * trigger 메소드
        1. 특정 요소의 이벤트를 강제로 실행
        2. 사용법
           이벤트대상.trigger('이벤트타입');
           이벤트대상.이벤트메소드(); // trigger메소드 안써도 가능
    */
    $(document).ready(function(){
      $('#trigger').on('click', function(){
        //$('#test1').click();
        $('#test1').trigger('click');
      })
    })
  </script>



  
</body>
</html>